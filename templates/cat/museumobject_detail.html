{% extends "base_wide.html" %}

{% load uqam %}
{% load thumbnail %}
{% block body %}

{% include "snippets/top_search_panel.html" %}

<div id="content-primary" class="wide">


  <div class="search-results">
    {% if search_results %}
      <a href="{{search_url}}">Back to results</a>
       {{search_index}} of {{search_results.count}}

      {% if search_prev_obj %}
        <a href="{{ search_prev_obj.get_absolute_url }}?search_result={{search_index|add:'-1'}}"|>Prev</a>
      {% endif %}
      {% if search_next_obj %}
        <a href="{{ search_next_obj.get_absolute_url }}?search_result={{search_index|add:'1'}}">Next</a>
      {% endif %}
    {% endif %}
  </div>

<h1>{{ museumobject.artefact_type }}</h1>

<dl class="item-detail">
<dt>Item Type</dt>
<dd> {{ museumobject.artefact_type }}</dd>

<dt>Category</dt>
<dd>
{% for category in museumobject.category.all %}
    {% if category.parent %}
      <a href="{{ category.parent.get_absolute_url }}">{{category.parent.name}}</a>
      >
    {% endif %}
    <a href="{{ category.get_absolute_url }}">{{ category.name }}</a><br>
{% endfor %}
</dd>

<dt>Indigenous name</dt>
<dd>{{ museumobject.indigenous_name }}&nbsp;
</dd>

<dt>Maker</dt>
<dd>
{% if museumobject.maker %}
<a href="{{ museumobject.maker.get_absolute_url }}">
  {{ museumobject.maker }}</a>
{% endif %}&nbsp;
</dd>

<dt>Associated cultural group</dt>
<dd>
 {{ museumobject.assoc_cultural_group }}&nbsp;
</dd>

<dt>Place</dt>
<dd>
  <a href="{{museumobject.global_region.get_absolute_url}}">
    {{ museumobject.global_region }}</a>
    >
  <a href="{{museumobject.country.get_absolute_url}}">
    {{ museumobject.country }}</a>
    >
  <a href="{{museumobject.state_province.get_absolute_url}}">
    {{ museumobject.state_province }}</a>
    >
  <a href="{{museumobject.region_district.get_absolute_url}}">
    {{ museumobject.region_district }}</a>
    >
  <a href="{{museumobject.locality.get_absolute_url}}">
    {{ museumobject.locality }}</a>
</dd>

{% if museumobject.place.latitude %}
<dt>Map</dt>
<dd>
    <div id="map_canvas" style="height:105px"></div>
</dd>
{% endif %}

<dt>Collector</dt>
<dd>
<a href="{{museumobject.collector.get_absolute_url}}">
  {{ museumobject.collector }}</a>
</dd>

<dt>Acquisition date</dt>
<dd>
  {{ museumobject.acquisition_date|date:"F d, Y" }}
</dd>

<dt>Acquisition method</dt>
<dd>
{{ museumobject.acquisition_method }} <b>{{ museumobject.acquisition_method.preposition }}</b>
 <a href="{{museumobject.donor.get_absolute_url}}">{{ museumobject.donor }}</a>
</dd>

<dt>Registration number</dt>
<dd>{{ museumobject.registration_number}}</dd>

<dt>Dimensions</dt>
  <dd>
    <b>Height: </b> {{ museumobject.height|dimension:"mm" }}
    <b>Length: </b> {{ museumobject.length|dimension:"mm" }}
    <b>Width: </b> {{ museumobject.width|dimension:"mm" }}
    <b>Depth: </b> {{ museumobject.depth|dimension:"mm" }}
    <b>Circumference: </b> {{ museumobject.circumference|dimension:"mm" }}
  </dd>


<dt>Physical description</dt>
<dd>{{ museumobject.description|linebreaks }} </dd>
<dt>Research notes</dt>
<dd>{{ museumobject.comment|linebreaks }}</dd>

</dl>


{% if user.is_staff %}
<h3>Staff Information</h3>
<dl class="item-detail">
<dt>Functional Category (old)</dt>
<dd>{{ museumobject.functional_category }}</dd>


{% if museumobject.category_illustrated %}
<dt>Category Illustrated</dt>
<dd>
    <a href="{{ museumobject.category_illustrated.get_absolute_url }}">
    {{ museumobject.category_illustrated }}</a>
</dd>
{% endif %}

{% if museumobject.artefact_illustrated %}
<dt>Artefact Illustrated</dt>
<dd>
    <a href="{{ museumobject.artefact_illustrated.get_absolute_url }}">
    {{ museumobject.artefact_illustrated }}</a>
</dd>
{% endif %}

{% if museumobject.manufacture_technique %}
    <dt>Manufacture technique</dt>
    <dd>{{ museumobject.manufacture_technique }}
    </dd>
{% endif %}

{% if museumobject.creation_date %}
    <dt>Creation date</dt>
    <dd>{{ museumobject.creation_date }}
    </dd>
{% endif %}

{% if museumobject.raw_material %}
    <dt>Raw material</dt>
    <dd>{{ museumobject.raw_material }}
    </dd>
{% endif %}


{% if museumobject.recorded_use %}
    <dt>Recorded use</dt>
    <dd>{{ museumobject.recorded_use }}
    </dd>
{% endif %}

{% if museumobject.collections.all %}
    <dt>Sub collections</dt>
    <dd>
    {% for collection in museumobject.collections.all %}
    <a href="{{ collection.get_absolute_url }}">{{ collection.title }}</a>

    <br>
    {% endfor %}
    </dd>


{% endif %}



{% if museumobject.significance %}
    <dt>Statement of significance</dt>
    <dd>{{ museumobject.significance }}
    </dd>
{% endif %}



{% if museumobject.related_documents.all %}
    <dt>Related documents</dt>
    <dd>
    {% for doc in museumobject.related_documents.all %}
        <a href="{{doc.document.url}}">{{doc.name}}</a> <br>
    {% endfor %}
    </dd>
{% endif %}



{% if museumobject.photorecord_set %}
  <dt>Photographic Record</dt>
  <dd>
  {% for pr in museumobject.photorecord_set.all %}
    {{ pr.phototype }} {{ pr.comments}}<br>
  {% endfor %}
  </dd>
{% endif %}

{% if museumobject.reg_info %}
  <dt>Registration Information</dt>
  <dd>
    {{ museumobject.reg_info|linebreaks }}
  </dd>
{% endif %}

{% if museumobject.exhibition_history %}
  <dt>Exhibition History</dt>
  <dd>
    {{ museumobject.exhibition_history|linebreaks }}
  </dd>
{% endif %}

{% if museumobject.conditionreport_set.all %}
  <dt>Condition Reports</dt>
  <dd>
    {% for report in museumobject.conditionreport_set.all %}
    <a href="{% url admin:condition_conditionreport_change report.id %}">
        {{ report.date }} - {{ report.condition }}
    </a><br>
    {% endfor %}
  </dd>
{% endif %}

{% if museumobject.conservationaction_set.all %}
    <dt>Conservation Actions</dt>
    <dd>
    {% for action in museumobject.conservationaction_set.all %}
    <a href="{% url admin:condition_conservationaction_change action.id %}">
        {{ action }} </a><br>
    {% endfor %}
    </dd>
{% endif %}

{% if museumobject.deaccession_set.all %}
    <dt>Deacession</dt>
    <dd>
    {% for deaccession in museumobject.deaccession_set.all %}
    <a href="{% url admin:condition_deaccession_change deaccession.id %}">
        {{ deaccession }}</a><br>
    {% endfor %}
    </dd>
{% endif %}

</dl>

{% endif %} {# is_staff #}

</div><!-- /content-primary -->


<div id="content-secondary" class="wide">
{% if user.is_staff %}
<div style="float:right;font-size: 80%;">
    <a href="{% url admin:cat_museumobject_change museumobject.id %}">Admin</a>
</div>


{% endif %}
{% if museumobject.artefactrepresentation_set.exists %}
  <div id="item-images">
  {% for ar in museumobject.artefactrepresentation_set.all %}
    <div class="item{% if forloop.first%}active{%endif%}">
    {% if ar.url %}
      <a href="{{ ar.url }}" >
    {% else %}
      <a href="{{ ar.image.url }}">
    {% endif %}
    <img src="{% thumbnail ar.image 384x256 crop=scale watermark='UQ Anthropology Museum' %}" width="384" height="256" alt=""></a>
    </div>
  {% endfor %}
  </div>
{% endif %}
</div> <!-- /content-secondary -->
{% endblock body %}


{% block javascript %}
{% if museumobject.place.latitude %}
{% with p=museumobject.place %}
<script type="text/javascript"
  src="{% if request.is_secure %}https://maps-api-ssl.google.com{% else %}http://maps.googleapis.com{% endif %}/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    var geocoder, map;
    $(document).ready(
    function initialize() {
        var myOptions = {
            zoom: 3, // Zoomed out to show location in country
            disableDefaultUI: true,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        };

        var latlng = new google.maps.LatLng({{p.latitude}}, {{p.longitude}})

        myOptions.center = latlng;
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        var marker = new google.maps.Marker({
            map: map,
            position: latlng,
            title: "{{p.name}}, {{p.country}}",
            url: "{{p.get_absolute_url}}"
        });
        google.maps.event.addListener(marker, 'click', function() {
            window.location.href = marker.url;
        });
    });
</script>
{% endwith %}
{% endif %}
{% endblock %}
